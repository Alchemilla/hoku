\section{Methodology}\label{sec:methodology}
To analyze star identification algorithms, it is necessary to have images with \textit{every} aspect known: which
stars are in the images, the field-of-view of the camera, where exactly the camera is directed at in the sky, what
type of error exists in the image, how severe is the error, \ldots.
The goal is to keep as much of the image known, while only varying the star identification algorithm itself.

Unfortunately, obtaining actual images with controllable error is incredibly difficult and not the focus of this
project.
Time would have to be invested toward controlling the lens distortion, correctly mapping the image from 2D to 3D,
and accurately recording how the camera is directed toward on a clear sky.
The solution presented here is to remove the reliance on the camera to capture images, and instead
\textit{generate}the images.
This allows for controllable hardware (field-of-view, camera direction are now just parameters) and for controllable
error.

These images are generated using the Hipparcos Input Catalogue, an astronomical catalog of recorded stars and their
position relative to Earth.
Once the images were generated, three experiments were performed: one for feature uniqueness, one for reduction
effectiveness, and one for identification performance and accuracy.
The error introduced was in the form of centroiding error (slightly shifting the star in some random direction) and
as false stars.

All trials were performed on an Intel i7-7700 CPU, 3.60GHz with 16 GB RAM\@.
Each algorithm was implemented in C++17, and compiled without optimization (at \texttt{-O0}).
The exact implementation is available at the following link: \url{https://github.com/glennga/hoku}.

\subsection{Benchmark Data Generation}\label{subsec:benchmarkDataGeneration}
\begin{subequations}
    \label{eq:catalogToCartesian}
    Before generating benchmark images, each star in the Hipparcos Input Catalogue was moved into a 3D Cartesian frame
    using their right ascension and declination ($\alpha, \delta$).
    Depicted below is the conversion to ($x, y, z$) points, assuming $\alpha$ and $\delta$ are in radians:
    \begin{align}
        x &= d \times cos(\delta) cos(\alpha) \\
        y &= d \times cos(\delta) sin(\alpha) \\
        z &= d \times sin(\delta)
    \end{align}
\end{subequations}

$d$ in~\autoref{eq:catalogToCartesian} represents the distance from the Earth (an observer) to the star.
For this set of experiments, $d = 1$.
Also stored with each star's ($x, y, z$) position are the star's apparent magnitude (brightness) $m$ and catalog
identifier $\ell$.
\textit{For simplicity, the \underline{catalog} refers to the set of stars in this Cartesian frame.}

As mentioned before, all catalog stars exist in an inertial frame known as the \textit{catalog frame}.
To generate clean benchmark images, three items must be specified:
\begin{enumerate}
    \item An image center in the catalog frame $c_r$.
    \item The field-of-view of the camera $f$.
    \item Rotation to take stars in the catalog frame to the image frame $q_{rb}$.
\end{enumerate}

All stars $S_r$ from the catalog are selected such that no star exists more than $f$ away from $c_r$.
$S_r$ and $c_r$ are then rotated by $q_{rb}$ to construct the image stars: $S_b$ and $c_b$.
$S_b$ is then stripped of their catalog identifiers, as it is the job of the identification method to guess these.
What is presented to each identification method are the stars in the image $S_b$, the center of the image $c_b$, and
the field-of-view $f$.

% Citation: Pyramid method, pg14
Centroiding error is applied to $S_b$ by slightly rotating a star $s$ in a random direction, whose severity is
determined by a Gaussian distribution $N(0, \sigma^2)$.
For this set of experiments, $\sigma = 50\mu rad$.
False stars were added to $S_b$ by generating a random vector $s$ within $f$ of $c_b$.

\subsection{Feature Uniqueness}\label{subsec:featureUniquenessMethods}
This experiment attempts to answer the following question:
\begin{displayquote}
    \textit{Which set of features most accurately distinguish a set of stars?}
\end{displayquote}

The feature uniqueness from each identification method were analyzed in terms of their (1) distribution across all
possible combinations of stars in the catalog, and (2) the \textit{hit count} vs. $|R|$ as a result of a single
catalog candidate search.
Hit count here refers to finding a specific set of stars in the candidates.
Partial images for (2) were generated with enough stars to derive a single candidate set $R$ from (e.g.\ the Angle
method would only contain two stars in the image).
By using (1) and (2), the most accurate feature set can be determined.

Toloei's Composite Pyramid uses the same features as Cole and Crassidus's Planar Triangles method, so only five
features were tested:
\begin{enumerate}
    \item Angular separation $\theta^{ij}$ between two stars.
    \item Angular separations $\theta^{ic}, \theta^{jc}$ and interior angle $\phi$ between three stars.
    \item Planar area $a^{ijk}$ and moment $\imath^{ijk}$ between three stars.
    \item Spherical area $a^{ijk}$ and moment $\imath^{ijk}$ between three stars.
    \item Angular separations $\theta^{ij}, \theta^{ik}, \theta^{jk}$ between three stars.
\end{enumerate}

\subsection{Candidate Reduction}\label{subsec:candidateReductionMethods}
This experiment attempts to answer the following question:
\begin{displayquote}
    \textit{What is the best process for reducing a set of catalog candidates?}
\end{displayquote}

To start, complete images are generated containing $S_b$, $c_b$, and $f$.
Each identification method is ran until a singular set $r$ in $R$ is found.
If all $r$ exists in the original set $S_r$ used to generate the image, then this is counted as a \textit{hit}.
The number of hits per identification method determines how well each feature set and reduction process performs.

\subsection{Identification}\label{subsec:identificationMethods}
This experiment attempts to answer the following question:
\begin{displayquote}
    \textit{Which identification method can most accurately determine a map?}
\end{displayquote}